<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_data_cash_flow_base">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="cortex_na.minimal_layout_inherit">
                    <t t-call="cortex_na.report_data_cash_flow_main_report_tmp" />
                </t>
            </t>
        </t>
    </template>


    <template id="report_data_cash_flow_main_report_tmp">
        <div class="page">
            <div class="page_break">
                <div class="act_as_table data_table" style="width: 100%;text-align: left;">
                    <script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
                    <link type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css"></link>

                    <t t-call="cortex_na.report_cash_flow_header" />
                    <t t-set='open_receivables' t-value="request.env['account.move'].browse(o.find_general_data().get('account_receivable'))" />
                    <t t-if="open_receivables">
                        <h4 class="table_title balance_opr_lines_total_amounts hide_table" t-esc="'Account Receivables'"/>
                        <t t-call="cortex_na.balance_open_receivables_lines" />
                    </t>
                    <t t-set='quotations' t-value="request.env['sale.order'].browse(o.find_general_data().get('quotations'))" />
                    <t t-if="quotations">
                        <h4 class="table_title balance_quotations_total_amounts hide_table" t-esc="'Quotations'"/>
                        <t t-call="cortex_na.balance_quotations_lines" />
                    </t>
                    <t t-set='sale_orders' t-value="request.env['sale.order'].browse(o.find_general_data().get('sale_order'))" />
                    <t t-if="sale_orders">
                        <h4 class="table_title balance_so_lines_total_amounts hide_table" t-esc="'Sale Orders'"/>
                        <t t-call="cortex_na.balance_so_lines" />
                    </t>
                    <t t-set='open_payables' t-value="request.env['account.move'].browse(o.find_general_data().get('account_payable'))" />
                    <t t-if="open_payables">
                        <h4 class="table_title balance_opp_lines_total_amounts hide_table" t-esc="'Account Payable'"/>
                        <t t-call="cortex_na.balance_open_payables_lines" />
                    </t>
                    <t t-set='rfqs' t-value="request.env['purchase.order'].browse(o.find_general_data().get('rfqs'))" />
                    <t t-if="rfqs">
                        <h4 class="table_title balance_rfqs_lines_total_amounts hide_table" t-esc="'Requests For Quotation'"/>
                        <t t-call="cortex_na.balance_rfqs_lines" />
                    </t>
                    <t t-set='po' t-value="request.env['purchase.order'].browse(o.find_general_data().get('purchase_order'))" />
                    <t t-if="po">
                        <h4 class="table_title balance_po_lines_total_amounts hide_table" t-esc="'Purchase Orders'"/>
                        <t t-call="cortex_na.balance_po_lines" />
                    </t>
                </div>
            </div>
        </div>
    </template>

    <template id="cf_report_buttons_cortex">
        <div class="button_row">
            <label class="switch">
                <input type="checkbox"/>
                <span class="slider round  quotations_click_toggle"></span>
            </label>
            <label class="switch_title">
                <strong class="show_title">Click to see Quotations &amp; RFQ</strong>
                <strong class="hide_title hide_table">Click to hide Quotations &amp; RFQ</strong>
            </label>
        </div>
        <div class="button_row">
            <button class="o_account_financial_reports_export btn btn-primary"><span class="fa fa-download"/> Export</button>
        </div>
    </template>

    <template id="report_cash_flow_header">
        <h4 class="table_title" t-esc="'Cash Flow Statement'"/>
        <t t-call="cortex_na.cf_report_buttons_cortex"/>
        <div class="act_as_table data_table" style="width: 100%;font-weight: bold;">
            <div class="act_as_thead">
                <div class="act_as_row labels">
                    <div class="right date_col_header"></div>
                    <div class="act_as_cell right date_col_header">Total Balance</div>
                    <div class="act_as_cell right date_col_header">
                        <t t-raw="o.return_today()" t-options="{'widget': 'date'}" />
                    </div>
                    <t t-set='date_sets_cfh' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-foreach="date_sets_cfh" t-as="dt_cfh">
                        <div class="act_as_cell right date_col_header">
                            <t t-raw="dt_cfh" t-options="{'widget': 'date'}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels rec_click">
                    <div class="act_as_cell date_col_header" style="color: black;">
                        <span>
                            Account Receivables
                        </span>
                    </div>
                    <t t-set="amount_due" t-value="0" />
                    <t t-set="opr_start_date_pending_amount" t-value="0" />
                    <t t-set='opr_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_receivable'))" />
                    <t t-foreach="opr_amount" t-as="opr_amt">
                        <t t-set="amount_due" t-value="opr_amt.amount_residual_signed +  amount_due" />
                        <t t-if="not(opr_amt.invoice_date_due)">
                            <t t-if="opr_amt.expected_date">
                                <t t-if="opr_amt.expected_date &lt;= o.return_today()">
                                    <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                </t>
                            </t>
                        </t>
                        <t t-if="not(opr_amt.expected_date)">
                            <t t-if="opr_amt.invoice_date_due">
                                <t t-if="opr_amt.invoice_date_due &lt;= o.return_today()">
                                    <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                </t>
                            </t>
                        </t>
                        <t t-if="opr_amt.expected_date">
                            <t t-if="opr_amt.invoice_date_due">
                                <t t-if="opr_amt.invoice_date_due &gt; opr_amt.expected_date">
                                    <t t-if="opr_amt.invoice_date_due &lt;= o.return_today()">
                                        <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                    </t>
                                </t>
                                <t t-if="opr_amt.expected_date &gt; opr_amt.invoice_date_due">
                                    <t t-if="opr_amt.expected_date &lt;= o.return_today()">
                                        <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                    </t>
                                </t>
                                <t t-if="opr_amt.invoice_date_due == opr_amt.expected_date">
                                    <t t-if="opr_amt.invoice_date_due &lt;= o.return_today()">
                                        <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                    </t>
                                </t>
                            </t>
                        </t>
                    </t>
                    <div class="act_as_cell amount right date_col_header">
                        <t t-raw="amount_due" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="opr_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-set='first' t-value="first + 1"/>
                        <t t-foreach="opr_amount" t-as="so">
                            <t t-if="not(so.invoice_date_due)">
                                <t t-if="so.expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="so.expected_date &lt;= dt_op[dt]">
                                            <t t-if="so.expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="so.expected_date &lt;= dt_op[dt] ">
                                            <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="not(so.expected_date)">
                                <t t-if="so.invoice_date_due">
                                    <t t-if="first == 1">
                                        <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="so.expected_date">
                                <t t-if="so.invoice_date_due">
                                    <t t-if="so.invoice_date_due &gt; so.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="so.expected_date &gt; so.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="so.expected_date == so.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>

                        </t>
                        <div class="act_as_cell amount date_col_header">
                            <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels quotations_click data_table quote_main hide_table">
                    <div class="act_as_cell date_col_header " style="color: black;">
                        <span>
                            Quotations
                        </span>
                    </div>
                    <t t-set="quote_total_amount" t-value="0" />
                    <t t-set="quote_start_date_pending_amount" t-value="0" />
                    <t t-set='quoteamount' t-value="request.env['sale.order'].browse(o.find_general_data().get('quotations'))" />
                    <t t-foreach="quoteamount" t-as="so_line">
                        <t t-set="quote_total_amount" t-value="so_line.amount_total +  quote_total_amount" />
                        <t t-if="so_line.new_expected_date">
                            <t t-if="so_line.new_expected_date &lt;= o.return_today()">
                                <t t-set="quote_start_date_pending_amount" t-value="so_line.amount_total +  quote_start_date_pending_amount" />
                            </t>
                        </t>
                    </t>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="quote_total_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="quote_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set='first' t-value="first + 1"/>
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-foreach="quoteamount" t-as="so">
                            <t t-if="so.new_expected_date">
                                <t t-if="first == 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; o.return_today()">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_total" />
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_total" />
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <div class="act_as_cell amount date_col_header">
                            <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels sale_order_click">
                    <div class="act_as_cell date_col_header" style="color: black;">
                        Sale Orders
                    </div>
                    <t t-set="so_pending_amount" t-value="0" />
                    <t t-set="so_start_date_pending_amount" t-value="0" />
                    <t t-set='soamount' t-value="request.env['sale.order'].browse(o.find_general_data().get('sale_order'))" />
                    <t t-foreach="soamount" t-as="so_line">
                        <t t-set="so_pending_amount" t-value="so_line.remaining_funds_to_be_received +  so_pending_amount" />
                        <t t-if="so_line.new_expected_date">
                            <t t-if="so_line.new_expected_date &lt;= o.return_today()">
                                <t t-set="so_start_date_pending_amount" t-value="so_line.remaining_funds_to_be_received +  so_start_date_pending_amount" />
                            </t>
                        </t>
                    </t>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="so_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="so_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set='first' t-value="first + 1"/>
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-foreach="soamount" t-as="so">
                            <t t-if="so.new_expected_date">
                                <t t-if="first == 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; o.return_today()">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <div class="act_as_cell amount date_col_header">
                            <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels">
                    <div class="act_as_cell date_col_header">
                        <b>Total A/R And S/O's</b>
                    </div>
                    <div class="act_as_cell amount date_col_header  quote_main hide_table">
                        <t t-raw="amount_due + so_pending_amount + quote_total_amount"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  with_out_quote_main ">
                        <t t-raw="amount_due + so_pending_amount"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  quote_main hide_table">
                        <t t-raw="opr_start_date_pending_amount + so_start_date_pending_amount + quote_start_date_pending_amount"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  with_out_quote_main">
                        <t t-raw="opr_start_date_pending_amount + so_start_date_pending_amount"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='soamount' t-value="request.env['sale.order'].browse(o.find_general_data().get('sale_order'))" />
                    <t t-set='quote_amount' t-value="request.env['sale.order'].browse(o.find_general_data().get('quotations'))" />
                    <t t-set='opr_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_receivable'))" />
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-set="date_wise_quote_amount" t-value="0" />
                        <t t-set='first' t-value="first + 1"/>
                        <t t-foreach="quote_amount" t-as="qo">
                            <t t-if="qo.new_expected_date">
                                <t t-if="first == 1">
                                    <t t-if="qo.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="qo.new_expected_date &gt; o.return_today()">
                                            <t t-set="date_wise_quote_amount" t-value="date_wise_quote_amount + qo.amount_total" />
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="qo.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="qo.new_expected_date &gt; dt_op[dt-1]">
                                            <t t-set="date_wise_quote_amount" t-value="date_wise_quote_amount + qo.amount_total" />
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>

                        <t t-foreach="soamount" t-as="so">
                            <t t-if="so.new_expected_date">
                                <t t-if="first == 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; o.return_today()">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>

                        <t t-foreach="opr_amount" t-as="oprt">
                            <t t-if="not(oprt.invoice_date_due)">
                                <t t-if="oprt.expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                            <t t-if="oprt.expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oprt.expected_date &lt;= dt_op[dt] ">
                                            <t t-if="oprt.expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="not(oprt.expected_date)">
                                <t t-if="oprt.invoice_date_due">
                                    <t t-if="first == 1">
                                        <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oprt.invoice_date_due &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oprt.invoice_date_due &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="oprt.expected_date">
                                <t t-if="oprt.invoice_date_due">
                                    <t t-if="oprt.invoice_date_due &gt; oprt.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oprt.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oprt.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="oprt.expected_date &gt; oprt.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="oprt.expected_date == oprt.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <div class="act_as_cell amount date_col_header  quote_main hide_table">
                            <t t-raw="date_wise_amount + date_wise_quote_amount"
                               t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>

                        <div class="act_as_cell amount date_col_header  with_out_quote_main ">
                            <t t-raw="date_wise_amount"
                               t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels acc_pay_click">
                    <div class="act_as_cell date_col_header" style="color: black;">
                        Account Payable
                    </div>
                    <t t-set="remaining_due" t-value="0" />
                    <t t-set="opp_start_date_pending_amount" t-value="0" />
                    <t t-set='opp_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_payable'))" />
                    <t t-foreach="opp_amount" t-as="opp_amt">
                        <t t-set="remaining_due" t-value="opp_amt.amount_residual_signed +  remaining_due" />
                        <t t-if="not(opp_amt.invoice_date_due)">
                            <t t-if="opp_amt.expected_date">
                                <t t-if="opp_amt.expected_date &lt;= o.return_today()">
                                    <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                </t>
                            </t>
                        </t>
                        <t t-if="not(opp_amt.expected_date)">
                            <t t-if="opp_amt.invoice_date_due">
                                <t t-if="opp_amt.invoice_date_due &lt;= o.return_today()">
                                    <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                </t>
                            </t>
                        </t>
                        <t t-if="opp_amt.expected_date">
                            <t t-if="opp_amt.invoice_date_due">
                                <t t-if="opp_amt.invoice_date_due &gt; opp_amt.expected_date">
                                    <t t-if="opp_amt.invoice_date_due &lt;= o.return_today()">
                                        <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                    </t>
                                </t>
                                <t t-if="opp_amt.expected_date &gt; opp_amt.invoice_date_due">
                                    <t t-if="opp_amt.expected_date &lt;= o.return_today()">
                                        <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                    </t>
                                </t>
                                <t t-if="opp_amt.expected_date == opp_amt.invoice_date_due">
                                    <t t-if="opp_amt.expected_date &lt;= o.return_today()">
                                        <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                    </t>
                                </t>
                            </t>
                        </t>
                    </t>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw=" - remaining_due" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
<!--                    <div class="act_as_cell date_col_header"></div>-->
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw=" - opp_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-set='first' t-value="first + 1"/>
                        <t t-foreach="opp_amount" t-as="so">
                            <t t-if="not(so.invoice_date_due)">
                                <t t-if="so.expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="so.expected_date &lt;= dt_op[dt]">
                                            <t t-if="so.expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="so.expected_date &lt;= dt_op[dt] ">
                                            <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="not(so.expected_date)">
                                <t t-if="so.invoice_date_due">
                                    <t t-if="first == 1">
                                        <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="so.expected_date">
                                <t t-if="so.invoice_date_due">
                                    <t t-if="so.invoice_date_due &gt; so.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="so.expected_date &gt; so.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="so.expected_date == so.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <div class="act_as_cell amount date_col_header">
                            <t t-raw=" - date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels rfqs_click data_table rfq_main hide_table">
                    <div class="act_as_cell date_col_header" style="color: black;">
                        Requests For Quotation
                    </div>
                    <t t-set="rfq_left_to_be_paid" t-value="0" />
                    <t t-set="rfq_start_date_pending_amount" t-value="0" />
                    <t t-set='rfqamount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('rfqs'))" />
                    <t t-foreach="rfqamount" t-as="line">
                        <t t-if="line.remaining_amount == 0">
                            <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                <t t-set="rfq_left_to_be_paid" t-value="line.qty_received_total +  rfq_left_to_be_paid" />
                            </t>
                        </t>
                        <t t-else="">
                            <t t-set="rfq_left_to_be_paid" t-value="line.remaining_amount +  rfq_left_to_be_paid" />
                        </t>
                    </t>
                    <t t-foreach="rfqamount" t-as="line">
                        <t t-if="line.expected_date">
                            <t t-set='all_dt' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set="dt_start" t-value="line.expected_date" />
                            <t t-if="dt_start &lt; all_dt[0]">
                                <t t-if="line.expected_date &lt;= dt_start">
                                    <t t-if="line.expected_date  &lt;=  o.return_today()">
                                        <t t-if="line.remaining_amount == 0">
                                            <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                <t t-set="rfq_start_date_pending_amount" t-value="rfq_start_date_pending_amount + line.qty_received_total"/>
                                            </t>

                                        </t>
                                        <t t-else="">
                                            <t t-set="rfq_start_date_pending_amount" t-value="rfq_start_date_pending_amount + line.remaining_amount"/>
                                        </t>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-set="rfq_start_date_pending_amount" t-value="0"/>
                                </t>
                            </t>
                        </t>
                    </t>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="rfq_left_to_be_paid" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="rfq_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set='first' t-value="first +1"/>
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-foreach="rfqamount" t-as="line">
                            <t t-if="line.expected_date">
                                <t t-set="dt_tt" t-value="line.expected_date " />
                                <t t-if="first == 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; o.return_today()">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; dt_op[dt-1]">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <div class="act_as_cell amount date_col_header">
                            <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels purchase_order_click">
                    <div class="act_as_cell date_col_header" style="color: black;">
                        Open Purchase Orders
                    </div>
                    <t t-set="p_left_to_be_paid" t-value="0" />
                    <t t-set="po_start_date_pending_amount" t-value="0" />
                    <t t-set='poamount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('purchase_order'))" />
                    <t t-foreach="poamount" t-as="line">
                        <t t-if="line.remaining_amount == 0">
                            <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                <t t-set="p_left_to_be_paid" t-value="line.qty_received_total +  p_left_to_be_paid" />
                            </t>
                        </t>
                        <t t-else="">
                            <t t-set="p_left_to_be_paid" t-value="line.remaining_amount +  p_left_to_be_paid" />
                        </t>
                    </t>
                    <t t-foreach="poamount" t-as="line">
                        <t t-if="line.expected_date">
                            <t t-set='all_dt' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set="dt_start" t-value="line.expected_date " />
                            <t t-if="dt_start &lt; all_dt[0]">
                                <t t-if="line.expected_date &lt;= dt_start">
                                    <t t-if="line.expected_date  &lt;=  o.return_today()">
                                        <t t-if="line.remaining_amount == 0">
                                            <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                <t t-set="po_start_date_pending_amount" t-value="po_start_date_pending_amount + line.qty_received_total"/>
                                            </t>

                                        </t>
                                        <t t-else="">
                                            <t t-set="po_start_date_pending_amount" t-value="po_start_date_pending_amount + line.remaining_amount"/>
                                        </t>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-set="po_start_date_pending_amount" t-value="0"/>
                                </t>
                            </t>
                        </t>
                    </t>
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="p_left_to_be_paid" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
<!--                    <div class="act_as_cell amount date_col_header">-->
<!--                    </div>-->
                    <div class="act_as_cell amount date_col_header">
                        <t t-raw="po_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set='first' t-value="first + 1"/>
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-foreach="poamount" t-as="line">
                            <t t-if="line.expected_date">
                                <t t-set="dt_tt" t-value="line.expected_date " />
                                <t t-if="first == 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; o.return_today()">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; dt_op[dt-1]">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <div class="act_as_cell amount date_col_header">
                            <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels">
                    <div class="act_as_cell date_col_header">
                        <b>Total Payables And PO's</b>
                    </div>
                    <div class="act_as_cell amount date_col_header  quote_main hide_table">
                        <t t-raw=" - remaining_due + (p_left_to_be_paid + rfq_left_to_be_paid)" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  with_out_quote_main ">
                        <t t-raw=" - remaining_due + (p_left_to_be_paid)" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  quote_main hide_table">
                        <t t-raw=" - opp_start_date_pending_amount + (po_start_date_pending_amount + rfq_start_date_pending_amount)"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  with_out_quote_main ">
                        <t t-raw=" - opp_start_date_pending_amount + (po_start_date_pending_amount)"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <t t-set='rfq_amount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('rfqs'))" />
                    <t t-set='poamount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('purchase_order'))" />
                    <t t-set='opp_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_payable'))" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-set="rfq_date_wise_amount" t-value="0" />
                        <t t-set='first' t-value="first + 1"/>
                        <t t-foreach="rfq_amount" t-as="line">
                            <t t-if="line.expected_date">
                                <t t-set="dt_tt" t-value="line.expected_date " />
                                <t t-if="first == 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; o.return_today()">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                    <t t-set="rfq_date_wise_amount" t-value="rfq_date_wise_amount + line.qty_received_total" />
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="rfq_date_wise_amount" t-value="rfq_date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; dt_op[dt-1]">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-set="rfq_date_wise_amount" t-value="rfq_date_wise_amount + line.qty_received_total" />
                                            </t>
                                            <t t-else="">
                                                <t t-set="rfq_date_wise_amount" t-value="rfq_date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <t t-foreach="poamount" t-as="line">
                            <t t-if="line.expected_date">
                                <t t-set="dt_tt" t-value="line.expected_date " />
                                <t t-if="first == 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; o.return_today()">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; dt_op[dt-1]">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <t t-foreach="opp_amount" t-as="oppt">
<!--                            <t t-if="oppt.invoice_date_due">-->
<!--                                <t t-if="first == 1">-->
<!--                                    <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">-->
<!--                                        <t t-if="oppt.invoice_date_due &gt; o.return_today()">-->
<!--                                            <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />-->
<!--                                        </t>-->
<!--                                    </t>-->
<!--                                </t>-->
<!--                                <t t-if="first != 1">-->
<!--                                    <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">-->
<!--                                        <t t-if="oppt.invoice_date_due &gt; dt_op[dt-1]">-->
<!--                                            <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />-->
<!--                                        </t>-->
<!--                                    </t>-->
<!--                                </t>-->
<!--                            </t>-->
                            <t t-if="not(oppt.invoice_date_due)">
                                <t t-if="oppt.expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                            <t t-if="oppt.expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oppt.expected_date &lt;= dt_op[dt] ">
                                            <t t-if="oppt.expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="not(oppt.expected_date)">
                                <t t-if="oppt.invoice_date_due">
                                    <t t-if="first == 1">
                                        <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oppt.invoice_date_due &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oppt.invoice_date_due &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="oppt.expected_date">
                                <t t-if="oppt.invoice_date_due">
                                    <t t-if="oppt.invoice_date_due &gt; oppt.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oppt.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oppt.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="oppt.expected_date &gt; oppt.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oppt.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oppt.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <div class="act_as_cell amount date_col_header  quote_main hide_table">
                            <t t-raw="date_wise_amount + rfq_date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                        <div class="act_as_cell amount date_col_header  with_out_quote_main ">
                            <t t-raw="date_wise_amount " t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>

            <div class="act_as_head">
                <div class="act_as_row labels">
                    <div class="act_as_cell date_col_header">
                        <b>Net Up Or Down</b>
                    </div>
                    <div class="act_as_cell amount date_col_header  quote_main hide_table">
                        <t t-raw="((amount_due + so_pending_amount + quote_total_amount)-
                        (-remaining_due + (p_left_to_be_paid + rfq_left_to_be_paid)))"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  with_out_quote_main ">
                        <t t-raw="((amount_due + so_pending_amount)-
                        (-remaining_due + (p_left_to_be_paid)))"
                           t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                    </div>
                    <div class="act_as_cell amount date_col_header  quote_main hide_table">
                        <t t-raw="((opr_start_date_pending_amount + so_start_date_pending_amount + quote_start_date_pending_amount) -
                         (-opp_start_date_pending_amount + po_start_date_pending_amount + rfq_start_date_pending_amount))" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
<!--                        <t t-raw="((amount_due + so_pending_amount) - (remaining_due + p_left_to_be_paid))" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />-->
                    </div>
                    <div class="act_as_cell amount date_col_header  with_out_quote_main ">
                        <t t-raw="((opr_start_date_pending_amount + so_start_date_pending_amount) -
                         (-opp_start_date_pending_amount + po_start_date_pending_amount))" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
<!--                        <t t-raw="((amount_due + so_pending_amount) - (remaining_due + p_left_to_be_paid))" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />-->
                    </div>

                    <t t-set='quote_amount' t-value="request.env['sale.order'].browse(o.find_general_data().get('quotations'))" />
                    <t t-set='soamount' t-value="request.env['sale.order'].browse(o.find_general_data().get('sale_order'))" />
                    <t t-set='opr_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_receivable'))" />
                    <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                    <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                    <t t-set='rfq_amount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('rfqs'))" />
                    <t t-set='poamount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('purchase_order'))" />
                    <t t-set='opp_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_payable'))" />
                    <t t-set='first' t-value="0"/>
                    <t t-foreach="len(dt_op)" t-as="dt">
                        <t t-set="net_up_down" t-value="0" />
                        <t t-set="net_up_down_without_quote_rfq" t-value="0" />
                        <t t-set="date_wise_amount" t-value="0" />
                        <t t-set="date_wise_amount_quote" t-value="0" />
                        <t t-set='first' t-value="first + 1"/>
                        <t t-foreach="quote_amount" t-as="qo">
                            <t t-if="qo.new_expected_date">
                                <t t-if="first == 1">
                                    <t t-if="qo.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="qo.new_expected_date &gt; o.return_today()">
                                            <t t-set="date_wise_amount_quote" t-value="date_wise_amount_quote + qo.amount_total" />
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="qo.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="qo.new_expected_date &gt; dt_op[dt-1]">
                                            <t t-set="date_wise_amount_quote" t-value="date_wise_amount_quote + qo.amount_total" />
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>

                        <t t-foreach="soamount" t-as="so">
                            <t t-if="so.new_expected_date">
                                <t t-if="first == 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; o.return_today()">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                        <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                            <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>

                        <t t-foreach="opr_amount" t-as="oprt">
                            <t t-if="not(oprt.invoice_date_due)">
                                <t t-if="oprt.expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                            <t t-if="oprt.expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oprt.expected_date &lt;= dt_op[dt] ">
                                            <t t-if="oprt.expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="not(oprt.expected_date)">
                                <t t-if="oprt.invoice_date_due">
                                    <t t-if="first == 1">
                                        <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oprt.invoice_date_due &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oprt.invoice_date_due &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="oprt.expected_date">
                                <t t-if="oprt.invoice_date_due">
                                    <t t-if="oprt.invoice_date_due &gt; oprt.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oprt.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oprt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oprt.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="oprt.expected_date &gt; oprt.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="oprt.expected_date == oprt.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oprt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oprt.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + oprt.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <t t-set="date_wise_amount_gen" t-value="0" />
                        <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                        <t t-set="date_wise_amount_without_rfq" t-value="0" />
                        <t t-foreach="rfqamount" t-as="line">
                            <t t-if="line.expected_date">
                                <t t-set="dt_tt" t-value="line.expected_date " />
                                <t t-if="first == 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; o.return_today()">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                    <t t-set="date_wise_amount_without_rfq" t-value="date_wise_amount_without_rfq + line.qty_received_total" />
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount_without_rfq" t-value="date_wise_amount_without_rfq + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; dt_op[dt-1]">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-set="date_wise_amount_without_rfq" t-value="date_wise_amount_without_rfq + line.qty_received_total" />
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount_without_rfq" t-value="date_wise_amount_without_rfq + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>
                        <t t-foreach="poamount" t-as="line">
                            <t t-if="line.expected_date">
                                <t t-set="dt_tt" t-value="line.expected_date " />
                                <t t-if="first == 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; o.return_today()">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                    <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + line.qty_received_total" />
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="first != 1">
                                    <t t-if="dt_tt &lt;= dt_op[dt]">
                                        <t t-if="dt_tt &gt; dt_op[dt-1]">
                                            <t t-if="line.remaining_amount == 0">
                                                <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + line.qty_received_total" />
                                            </t>
                                            <t t-else="">
                                                <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + line.remaining_amount" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>

                        <t t-foreach="opp_amount" t-as="oppt">
                            <t t-if="not(oppt.invoice_date_due)">
                                <t t-if="oppt.expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                            <t t-if="oppt.expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oppt.expected_date &lt;= dt_op[dt] ">
                                            <t t-if="oppt.expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="not(oppt.expected_date)">
                                <t t-if="oppt.invoice_date_due">
                                    <t t-if="first == 1">
                                        <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oppt.invoice_date_due &gt; o.return_today()">
                                                <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                            <t t-if="oppt.invoice_date_due &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-if="oppt.expected_date">
                                <t t-if="oppt.invoice_date_due">
                                    <t t-if="oppt.invoice_date_due &gt; oppt.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oppt.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oppt.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="oppt.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="oppt.expected_date &gt; oppt.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oppt.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oppt.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="oppt.expected_date == oppt.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oppt.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="oppt.expected_date &lt;= dt_op[dt]">
                                                <t t-if="oppt.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount_gen" t-value="date_wise_amount_gen + (-oppt.amount_residual_signed)" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </t>

                        <t t-set="net_up_down" t-value="net_up_down+date_wise_amount+date_wise_amount_quote" />
                        <t t-set="net_up_down_without_quote_rfq" t-value="net_up_down_without_quote_rfq+date_wise_amount"/>
                        <div class="act_as_cell amount date_col_header  quote_main hide_table"><!--quotations_click quote_main hide_table-->
                            <t t-raw="net_up_down - (date_wise_amount_gen+date_wise_amount_without_rfq)" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                        <div class="act_as_cell amount date_col_header  with_out_quote_main "><!--quotations_click quote_main hide_table-->
                            <t t-raw="(net_up_down - date_wise_amount_quote) - (date_wise_amount_gen)" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </div>
                    </t>
                </div>
            </div>
        </div>
    </template>

    <template id="balance_open_receivables_lines">
        <div class="tableFixHead">
            <table id="open_receivables_id" class="balance_open_receivables_lines hide_table">
                <t t-set="amount_due" t-value="0" />
                <t t-set="opr_start_date_pending_amount" t-value="0" />
                <t t-set='opr_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_receivable'))" />
                <t t-foreach="opr_amount" t-as="opr_amt">
                    <t t-set="amount_due" t-value="opr_amt.amount_residual_signed +  amount_due" />
                    <t t-if="not(opr_amt.invoice_date_due)">
                        <t t-if="opr_amt.expected_date">
                            <t t-if="opr_amt.expected_date &lt;= o.return_today()">
                                <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                            </t>
                        </t>
                    </t>
                    <t t-if="not(opr_amt.expected_date)">
                        <t t-if="opr_amt.invoice_date_due">
                            <t t-if="opr_amt.invoice_date_due &lt;= o.return_today()">
                                <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                            </t>
                        </t>
                    </t>
                    <t t-if="opr_amt.expected_date">
                        <t t-if="opr_amt.invoice_date_due">
                            <t t-if="opr_amt.invoice_date_due &gt; opr_amt.expected_date">
                                <t t-if="opr_amt.invoice_date_due &lt;= o.return_today()">
                                    <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                </t>
                            </t>
                            <t t-if="opr_amt.expected_date &gt; opr_amt.invoice_date_due">
                                <t t-if="opr_amt.expected_date &lt;= o.return_today()">
                                    <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                </t>
                            </t>
                        </t>
                    </t>
                    <t t-if="opr_amt.expected_date">
                        <t t-if="opr_amt.invoice_date_due">
                            <t t-if="opr_amt.invoice_date_due == opr_amt.expected_date">
                                <t t-if="opr_amt.invoice_date_due &lt;= o.return_today()">
                                    <t t-set="opr_start_date_pending_amount" t-value="opr_amt.amount_residual_signed +  opr_start_date_pending_amount" />
                                </t>
                            </t>
                        </t>
                    </t>
                </t>
                <thead class="sort_date">
                    <tr>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount right date_col_header">
                            <input type="hidden" id="sort-direction" value="SORT_ASC" />
                            <t t-raw="amount_due" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount right date_col_header">
                            <t t-raw="opr_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                        <t t-set='first' t-value="0"/>
                        <t t-foreach="len(dt_op)" t-as="dt">
                            <t t-set='first' t-value="first + 1"/>
                            <t t-set="date_wise_amount" t-value="0" />
                            <t t-foreach="opr_amount" t-as="so">
                                <t t-if="not(so.invoice_date_due)">
                                    <t t-if="so.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt] ">
                                                <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="not(so.expected_date)">
                                    <t t-if="so.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="so.expected_date">
                                    <t t-if="so.invoice_date_due">
                                        <t t-if="so.invoice_date_due &gt; so.expected_date">
                                            <t t-if="first == 1">
                                                <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                    <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                    <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="so.expected_date &gt; so.invoice_date_due">
                                            <t t-if="first == 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; o.return_today()">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="so.expected_date == so.invoice_date_due">
                                            <t t-if="first == 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; o.return_today()">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <th class="act_as_cell amount right date_col_header"><!--act_as_cell amount right date_col_header-->
                                <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                            </th>
                        </t>
                    </tr>
                    <tr>
                        <th class="date_col">
                            Number
                        </th>
                        <th class="date_col">
                            Invoice Partner Display Name
                        </th>
                        <th class="date_col">
                            Invoice/Bill Date
                        </th>
                        <th class="date_col">
                            Origin
                        </th>
                        <th class="date_col">
                            Expected Payment Date
                        </th>
                        <th class="date_col">
                            Due Date
                        </th>
                        <th class="date_col">
                            Reference
                        </th>
                        <th class="act_as_cell amount right date_col_header">
                            Total Signed
                        </th>
                        <th class="act_as_cell amount right date_col_header">
                            Amount Due
                        </th>
                        <th class="date_col">
                            Status
                        </th>
                        <th class="act_as_cell amount right date_col_header">
                            <t t-raw="o.return_today()" t-options="{'widget': 'date'}" />
                        </th>
                        <t t-set='date_sets_opr' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-foreach="date_sets_opr" t-as="dt_opr">
                            <th class="act_as_cell amount right date_col_header">
                                <t t-raw="dt_opr" t-options="{'widget': 'date'}" />
                            </th>
                        </t>
                    </tr>
                </thead>

                <tbody>
                    <t t-set='open_receivables' t-value="request.env['account.move'].browse(o.find_general_data().get('account_receivable'))" />
                    <t t-foreach="open_receivables" t-as="opr">
                        <tr class="lines">
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="opr.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="opr.partner_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="opr.invoice_date" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="opr.invoice_origin" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="opr.expected_date" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="opr.invoice_date_due" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="opr.ref" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount right date_col_header">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="opr.amount_total_signed" /><!--t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"-->
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount right date_col_header">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="opr.amount_residual_signed" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-esc="dict(opr.fields_get(allfields=['state'])['state']['selection'])[opr.state]" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount right date_col_header">
                                <t t-if="not(opr.invoice_date_due)">
                                    <t t-if="opr.expected_date">
                                        <t t-if="opr.expected_date &lt;= o.return_today()">
                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                <t t-raw="opr.amount_residual_signed"/>
                                            </a>
                                        </t>
                                        <t t-else="">
                                            <t t-set="dummy_var" t-value="0.00"/>
                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                               <t t-raw="dummy_var"/>
                                            </a>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                           <t t-raw="dummy_var"/>
                                        </a>
                                    </t>
                                </t>
                                <t t-if="not(opr.expected_date)">
                                    <t t-if="opr.invoice_date_due">
                                        <t t-if="opr.invoice_date_due &lt;= o.return_today()">
                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                               <t t-raw="opr.amount_residual_signed"/>
                                            </a>
                                        </t>
                                        <t t-else="">
                                            <t t-set="dummy_var" t-value="0.00"/>
                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                <t t-raw="dummy_var"/>
                                            </a>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="opr.expected_date">
                                    <t t-if="opr.invoice_date_due">
                                        <t t-if="opr.invoice_date_due &gt; opr.expected_date">
                                            <t t-if="opr.invoice_date_due &lt;= o.return_today()">
                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="opr.amount_residual_signed"/>
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var"/>
                                                </a>
                                            </t>
                                        </t>
                                        <t t-if="opr.expected_date &gt; opr.invoice_date_due">
                                            <t t-if="opr.expected_date &lt;= o.return_today()">
                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                   <t t-raw="opr.amount_residual_signed"/>
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var"/>
                                                </a>
                                            </t>
                                        </t>
                                        <t t-if="opr.expected_date == opr.invoice_date_due">
                                            <t t-if="opr.expected_date &lt;= o.return_today()">
                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                   <t t-raw="opr.amount_residual_signed"/>
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var"/>
                                                </a>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </td>
                            <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                            <t t-set='first' t-value="0"/>


                            <t t-foreach="len(dt_op)" t-as="dt">
                                <t t-set='first' t-value="first + 1"/>
                                <td class="act_as_cell amount right date_col_header">
                                    <span>
                                        <t t-if="not(opr.invoice_date_due)">
                                            <t t-if="opr.expected_date">
                                                <t t-if="first == 1">
                                                    <t t-if="opr.expected_date &lt;= dt_op[dt]">
                                                        <t t-if="opr.expected_date &gt; o.return_today()">
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="opr.amount_residual_signed"/>
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var"/>
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-if="first != 1">
                                                    <t t-if="opr.expected_date &lt;= dt_op[dt]">
                                                        <t t-if="opr.expected_date &gt; dt_op[dt-1]">
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="opr.amount_residual_signed"/>
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var"/>
                                                        </a>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="not(opr.expected_date)">
                                            <t t-if="opr.invoice_date_due">
                                                <t t-if="first == 1">
                                                    <t t-if="opr.invoice_date_due &lt;= dt_op[dt]">
                                                        <t t-if="opr.invoice_date_due &gt; o.return_today()">
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="opr.amount_residual_signed"/>
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var"/>
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-if="first != 1">
                                                    <t t-if="opr.invoice_date_due &lt;= dt_op[dt]">
                                                        <t t-if="opr.invoice_date_due &gt; dt_op[dt-1]">
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="opr.amount_residual_signed"/>
                                                            </a>

                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                           <t t-raw="dummy_var"/>
                                                        </a>
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var"/>
                                                </a>
                                            </t>
                                        </t>
                                        <t t-if="opr.invoice_date_due">
                                            <t t-if="opr.expected_date">
                                                <t t-if="opr.invoice_date_due &gt; opr.expected_date">
                                                    <t t-if="first == 1">
                                                        <t t-if="opr.invoice_date_due &lt;= dt_op[dt]">
                                                            <t t-if="opr.invoice_date_due &gt; o.return_today()">
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="opr.amount_residual_signed"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-if="first != 1">
                                                        <t t-if="opr.invoice_date_due &lt;= dt_op[dt]">
                                                            <t t-if="opr.invoice_date_due &gt; dt_op[dt-1]">
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="opr.amount_residual_signed"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                </t>
                                                <t t-if="opr.expected_date &gt; opr.invoice_date_due">
                                                    <t t-if="first == 1">
                                                        <t t-if="opr.expected_date &lt;= dt_op[dt]">
                                                            <t t-if="opr.expected_date &gt; o.return_today()">
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="opr.amount_residual_signed"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-if="first != 1">
                                                        <t t-if="opr.expected_date &lt;= dt_op[dt]">
                                                            <t t-if="opr.expected_date &gt; dt_op[dt-1]">
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="opr.amount_residual_signed"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                </t>
                                                <t t-if="opr.invoice_date_due == opr.expected_date">
                                                    <t t-if="first == 1">
                                                        <t t-if="opr.invoice_date_due &lt;= dt_op[dt]">
                                                            <t t-if="opr.invoice_date_due &gt; o.return_today()">
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="opr.amount_residual_signed"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-if="first != 1">
                                                        <t t-if="opr.invoice_date_due &lt;= dt_op[dt]">
                                                            <t t-if="opr.invoice_date_due &gt; dt_op[dt-1]">
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="opr.amount_residual_signed"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="opr.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </span>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template id="balance_open_payables_lines">
        <div class="tableFixHead">
            <table id="open_payables_id" class="balance_open_payables_lines hide_table">
                <t t-set="remaining_due" t-value="0" />
                <t t-set="opp_start_date_pending_amount" t-value="0" />
                <t t-set='opp_amount' t-value="request.env['account.move'].browse(o.find_general_data().get('account_payable'))" />
                <t t-foreach="opp_amount" t-as="opp_amt">
                    <t t-set="remaining_due" t-value="opp_amt.amount_residual_signed +  remaining_due" />
                    <t t-if="not(opp_amt.invoice_date_due)">
                        <t t-if="opp_amt.expected_date">
                            <t t-if="opp_amt.expected_date &lt;= o.return_today()">
                                <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                            </t>
                        </t>
                    </t>
                    <t t-if="not(opp_amt.expected_date)">
                        <t t-if="opp_amt.invoice_date_due">
                            <t t-if="opp_amt.invoice_date_due &lt;= o.return_today()">
                                <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                            </t>
                        </t>
                    </t>
                    <t t-if="opp_amt.expected_date">
                        <t t-if="opp_amt.invoice_date_due">
                            <t t-if="opp_amt.invoice_date_due &gt; opp_amt.expected_date">
                                <t t-if="opp_amt.invoice_date_due &lt;= o.return_today()">
                                    <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                </t>
                            </t>
                            <t t-if="opp_amt.expected_date &gt; opp_amt.invoice_date_due">
                                <t t-if="opp_amt.expected_date &lt;= o.return_today()">
                                    <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                </t>
                            </t>
                            <t t-if="opp_amt.expected_date == opp_amt.invoice_date_due">
                                <t t-if="opp_amt.expected_date &lt;= o.return_today()">
                                    <t t-set="opp_start_date_pending_amount" t-value="opp_amt.amount_residual_signed +  opp_start_date_pending_amount" />
                                </t>
                            </t>
                        </t>
                    </t>
                </t>
                <thead class="sort_date">
                    <tr>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw=" - remaining_due" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw=" - opp_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                        <t t-set='first' t-value="0"/>
                        <t t-foreach="len(dt_op)" t-as="dt">
                            <t t-set='first' t-value="first+1"/>
                            <t t-set="date_wise_amount" t-value="0" />
                            <t t-foreach="opp_amount" t-as="so">
                                <t t-if="not(so.invoice_date_due)">
                                    <t t-if="so.expected_date">
                                        <t t-if="first == 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                <t t-if="so.expected_date &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.expected_date &lt;= dt_op[dt] ">
                                                <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="not(so.expected_date)">
                                    <t t-if="so.invoice_date_due">
                                        <t t-if="first == 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="first != 1">
                                            <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="so.expected_date">
                                    <t t-if="so.invoice_date_due">
                                        <t t-if="so.invoice_date_due &gt; so.expected_date">
                                            <t t-if="first == 1">
                                                <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                    <t t-if="so.invoice_date_due &gt; o.return_today()">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.invoice_date_due &lt;= dt_op[dt]">
                                                    <t t-if="so.invoice_date_due &gt; dt_op[dt-1]">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="so.expected_date &gt; so.invoice_date_due">
                                            <t t-if="first == 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; o.return_today()">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="so.expected_date == so.invoice_date_due">
                                            <t t-if="first == 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; o.return_today()">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.expected_date &gt; dt_op[dt-1]">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_residual_signed" />
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="- date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                            </th>
                        </t>
                    </tr>
                    <tr>
                        <th class="date_col">
                            Number
                        </th>
                        <th class="date_col">
                            Invoice Partner Display Name
                        </th>
                        <th class="date_col">
                            Invoice/Bill Date
                        </th>
                        <th class="date_col">
                            Origin
                        </th>
                        <th class="date_col">
                            Planned Payment Date
                        </th>
                        <th class="date_col">
                            Due Date
                        </th>
                        <th class="date_col">
                            Reference
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Total Due
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining Due
                        </th>
                        <th class="date_col">
                            Status
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="o.return_today()" t-options="{'widget': 'date'}" />
                        </th>
                        <t t-set='date_sets_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-foreach="date_sets_op" t-as="dt_op">
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="dt_op" t-options="{'widget': 'date'}" />
                            </th>
                        </t>
                    </tr>
                </thead>

                <tbody>
                    <t t-set='open_payables' t-value="request.env['account.move'].browse(o.find_general_data().get('account_payable'))" />
                    <t t-foreach="open_payables" t-as="op">
                        <tr class="lines">
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="op.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="op.partner_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="op.invoice_date" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="op.invoice_origin" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="op.expected_date" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="op.invoice_date_due" />
                                    </a>
                                </span>
                            </td>
                            <td class="left" style="width: 5.55%;">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-raw="op.ref" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw=" - op.amount_total_signed" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw=" - op.amount_residual_signed" />
                                    </a>
                                </span>
                            </td>
                            <td class="amount date_col">
                                <span>
                                    <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action">
                                        <t t-esc="dict(op.fields_get(allfields=['state'])['state']['selection'])[op.state]" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <t t-if="not(op.invoice_date_due)">
                                    <t t-if="op.expected_date">
                                        <t t-if="op.expected_date &lt;= o.return_today()">
                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                <t t-raw=" - op.amount_residual_signed" />
                                            </a>
                                        </t>
                                        <t t-else="">
                                            <t t-set="dummy_var" t-value="0.00"/>
                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                               <t t-raw="dummy_var" />
                                            </a>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                           <t t-raw="dummy_var" />
                                        </a>
                                    </t>
                                </t>
                                <t t-if="not(op.expected_date)">
                                    <t t-if="op.invoice_date_due">
                                        <t t-if="op.invoice_date_due &lt;= o.return_today()">
                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                               <t t-raw=" - op.amount_residual_signed" />
                                            </a>
                                        </t>
                                        <t t-else="">
                                            <t t-set="dummy_var" t-value="0.00"/>
                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                <t t-raw="dummy_var" />
                                            </a>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="op.expected_date">
                                    <t t-if="op.invoice_date_due">
                                        <t t-if="op.invoice_date_due &gt; op.expected_date">
                                            <t t-if="op.invoice_date_due &lt;= o.return_today()">
                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw=" - op.amount_residual_signed" />
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var" />
                                                </a>
                                            </t>
                                        </t>
                                        <t t-if="op.expected_date &gt; op.invoice_date_due">
                                            <t t-if="op.expected_date &lt;= o.return_today()">
                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                   <t t-raw=" - op.amount_residual_signed" />
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var" />
                                                </a>
                                            </t>
                                        </t>
                                        <t t-if="op.expected_date == op.invoice_date_due">
                                            <t t-if="op.expected_date &lt;= o.return_today()">
                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                   <t t-raw=" - op.amount_residual_signed" />
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var" />
                                                </a>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </td>
                            <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                            <t t-set='first' t-value="0"/>
                            <t t-foreach="len(dt_op)" t-as="dt">
                                <t t-set='first' t-value="first + 1"/>
                                <td class="act_as_cell amount date_col_header">
                                    <span>
                                        <t t-if="not(op.invoice_date_due)">
                                            <t t-if="op.expected_date">
                                                <t t-if="first == 1">
                                                    <t t-if="op.expected_date &lt;= dt_op[dt]">
                                                        <t t-if="op.expected_date &gt; o.return_today()">
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw=" - op.amount_residual_signed"  />
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-if="first != 1">
                                                    <t t-if="op.expected_date &lt;= dt_op[dt]">
                                                        <t t-if="op.expected_date &gt; dt_op[dt-1]">
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw=" - op.amount_residual_signed" />
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-if="not(op.expected_date)">
                                            <t t-if="op.invoice_date_due">
                                                <t t-if="first == 1">
                                                    <t t-if="op.invoice_date_due &lt;= dt_op[dt]">
                                                        <t t-if="op.invoice_date_due &gt; o.return_today()">
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw=" - op.amount_residual_signed"/>
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-if="first != 1">
                                                    <t t-if="op.invoice_date_due &lt;= dt_op[dt]">
                                                        <t t-if="op.invoice_date_due &gt; dt_op[dt-1]">
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw=" - op.amount_residual_signed" />
                                                            </a>

                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                           <t t-raw="dummy_var"  />
                                                        </a>
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var" />
                                                </a>
                                            </t>
                                        </t>
                                        <t t-if="op.invoice_date_due">
                                            <t t-if="op.expected_date">
                                                <t t-if="op.invoice_date_due &gt; op.expected_date">
                                                    <t t-if="first == 1">
                                                        <t t-if="op.invoice_date_due &lt;= dt_op[dt]">
                                                            <t t-if="op.invoice_date_due &gt; o.return_today()">
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw=" - op.amount_residual_signed"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var" />
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-if="first != 1">
                                                        <t t-if="op.invoice_date_due &lt;= dt_op[dt]">
                                                            <t t-if="op.invoice_date_due &gt; dt_op[dt-1]">
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw=" - op.amount_residual_signed" />
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var" />
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                </t>
                                                <t t-if="op.expected_date &gt; op.invoice_date_due">
                                                    <t t-if="first == 1">
                                                        <t t-if="op.expected_date &lt;= dt_op[dt]">
                                                            <t t-if="op.expected_date &gt; o.return_today()">
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw=" - op.amount_residual_signed"  />
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var" />
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-if="first != 1">
                                                        <t t-if="op.expected_date &lt;= dt_op[dt]">
                                                            <t t-if="op.expected_date &gt; dt_op[dt-1]">
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw=" - op.amount_residual_signed"  />
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                </t>
                                                <t t-if="op.expected_date == op.invoice_date_due">
                                                    <t t-if="first == 1">
                                                        <t t-if="op.expected_date &lt;= dt_op[dt]">
                                                            <t t-if="op.expected_date &gt; o.return_today()">
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw=" - op.amount_residual_signed"  />
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var" />
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-if="first != 1">
                                                        <t t-if="op.expected_date &lt;= dt_op[dt]">
                                                            <t t-if="op.expected_date &gt; dt_op[dt-1]">
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw=" - op.amount_residual_signed"  />
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var"/>
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <t t-set="dummy_var" t-value="0.00"/>
                                                            <a t-att-data-active-id="op.id" t-att-data-res-model="'account.move'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="dummy_var"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </span>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template id="balance_so_lines">
        <div class="tableFixHead">
            <table id="balance_so_id" class="balance_so_lines hide_table">
                <t t-set="so_pending_amount" t-value="0" />
                <t t-set="remaining_funds_to_be_received" t-value="0" />
                <t t-set="so_start_date_pending_amount" t-value="0" />
                <t t-set='soamount' t-value="request.env['sale.order'].browse(o.find_general_data().get('sale_order'))" />
                <t t-foreach="soamount" t-as="so_line">
                    <t t-set="so_pending_amount" t-value="so_line.pending_amount +  so_pending_amount" />
                    <t t-set="remaining_funds_to_be_received" t-value="so_line.remaining_funds_to_be_received +  remaining_funds_to_be_received" />
                    <t t-if="so_line.new_expected_date">
                        <t t-if="so_line.new_expected_date &lt;= o.return_today()">
                            <t t-set="so_start_date_pending_amount" t-value="so_line.remaining_funds_to_be_received +  so_start_date_pending_amount" />
                        </t>
                    </t>
                </t>

                <thead class="sort_date">
                    <tr>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="so_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="remaining_funds_to_be_received" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="so_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                        <t t-set="first" t-value="0"/>
                        <t t-foreach="len(dt_op)" t-as="dt">
                            <t t-set="date_wise_amount" t-value="0" />
                            <t t-set="first" t-value="first+1"/>
                            <t t-foreach="soamount" t-as="so">
                                <t t-if="so.new_expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                            <t t-if="so.new_expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                            <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.remaining_funds_to_be_received" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                            </th>
                        </t>
                    </tr>
                    <tr>
                        <th class="date_col">
                            Order Reference
                        </th>
                        <th class="date_col">
                            Order Date
                        </th>
                        <th class="date_col">
                            Delivery Date
                        </th>
                        <th class="date_col">
                            Expected Date
                        </th>
                        <th class="date_col">
                            Customer
                        </th>
                        <th class="date_col">
                            Customer Reference
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Total
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Delivered Amount
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Pending Amount
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining Funds to be Received
                        </th>
                        <th class="date_col">
                            Invoice Status
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="o.return_today()" t-options="{'widget': 'date'}" />
                        </th>
                        <t t-set='date_sets_so' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-foreach="date_sets_so" t-as="dt_so">
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="dt_so" t-options="{'widget': 'date'}" />
                            </th>
                        </t>
                    </tr>
                </thead>

                <tbody>
                    <t t-set='sale_orders' t-value="request.env['sale.order'].browse(o.find_general_data().get('sale_order'))" />
                    <t t-foreach="sale_orders" t-as="so">
                        <tr class="lines">
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.date_order" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.commitment_date" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.new_expected_date" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.partner_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.client_order_ref" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="so.amount_total" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="so.delivered_amount"/>
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="so.pending_amount"/>
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="so.remaining_funds_to_be_received"/>
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-esc="dict(so.fields_get(allfields=['invoice_status'])['invoice_status']['selection'])[so.invoice_status]" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <t t-if="so.new_expected_date">
                                    <t t-if="so.new_expected_date &lt;= o.return_today()">
                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="so.remaining_funds_to_be_received"/>
                                        </a>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="dummy_var" />
                                        </a>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-set="dummy_var" t-value="0.00"/>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="dummy_var" />
                                    </a>
                                </t>
                            </td>
                            <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                            <t t-set="first" t-value="0"/>
                            <t t-foreach="len(dt_op)" t-as="dt">
                                <t t-set="first" t-value="first+1"/>
                                <td class="act_as_cell amount date_col_header">
                                    <span>
                                        <t t-if="so.new_expected_date">
                                            <t t-if="first == 1">
                                                <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.new_expected_date &gt; o.return_today()">
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="so.remaining_funds_to_be_received"/>
                                                        </a>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var"/>
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var"/>
                                                    </a>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="so.remaining_funds_to_be_received"/>
                                                        </a>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var"/>
                                                    </a>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-else="">
                                            <t t-set="dummy_var" t-value="0.00"/>
                                            <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                <t t-raw="dummy_var" />
                                            </a>
                                        </t>
                                    </span>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template id="balance_po_lines">
        <div class="tableFixHead">
            <table id="balance_po_id" class="balance_po_lines hide_table">
                <t t-set="p_remaining_to_be_received" t-value="0" />
                <t t-set="p_remaining_to_be_billed" t-value="0" />
                <t t-set="p_total" t-value="0" />
                <t t-set="p_left_to_be_paid" t-value="0" />
                <t t-set="po_start_date_pending_amount" t-value="0" />
                <t t-set='poamount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('purchase_order'))" />
                <t t-foreach="poamount" t-as="line">
                    <t t-set="p_remaining_to_be_received" t-value="line.qty_received_total +  p_remaining_to_be_received" />
                    <t t-set="p_remaining_to_be_billed" t-value="line.qty_billed_total +  p_remaining_to_be_billed" />
                    <t t-set="p_total" t-value="line.amount_total +  p_total" />
                    <t t-if="line.remaining_amount == 0">
                        <t t-if="line.qty_received_total &gt; line.remaining_amount">
                            <t t-set="p_left_to_be_paid" t-value="line.qty_received_total +  p_left_to_be_paid" />
                        </t>
                    </t>
                    <t t-else="">
                        <t t-set="p_left_to_be_paid" t-value="line.remaining_amount +  p_left_to_be_paid" />
                    </t>
                </t>
                <t t-foreach="poamount" t-as="line">
                    <t t-if="line.expected_date">
                        <t t-set='all_dt' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set="dt_start" t-value="line.expected_date " />
                        <t t-if="dt_start &lt; all_dt[0]">
                            <t t-if="line.expected_date &lt;= dt_start">
                                <t t-if="line.expected_date  &lt;=  o.return_today()">
                                    <t t-if="line.remaining_amount == 0">
                                        <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                            <t t-set="po_start_date_pending_amount" t-value="po_start_date_pending_amount + line.qty_received_total"/>
                                        </t>
    
                                    </t>
                                    <t t-else="">
                                        <t t-set="po_start_date_pending_amount" t-value="po_start_date_pending_amount + line.remaining_amount"/>
                                    </t>
                                </t>
                            </t>
                            <t t-else="">
                                <t t-set="po_start_date_pending_amount" t-value="0"/>
                            </t>
                        </t>
                    </t>
                </t>

                <thead class="sort_date">
                    <tr>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="p_remaining_to_be_received" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="p_remaining_to_be_billed" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="p_total" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="amount date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="p_left_to_be_paid" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="po_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                        <t t-set='first' t-value="0"/>
                        <t t-foreach="len(dt_op)" t-as="dt">
                            <t t-set="date_wise_amount" t-value="0" />
                            <t t-set='first' t-value="first+1"/>
                            <t t-foreach="poamount" t-as="line">
                                <t t-if="line.expected_date">
                                    <t t-set="dt_tt" t-value="line.expected_date " />
                                    <t t-if="first == 1">
                                        <t t-if="dt_tt &lt;= dt_op[dt]">
                                            <t t-if="dt_tt &gt; o.return_today()">
                                                <t t-if="line.remaining_amount == 0">
                                                    <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="dt_tt &lt;= dt_op[dt]">
                                            <t t-if="dt_tt &gt; dt_op[dt-1]">
                                                <t t-if="line.remaining_amount == 0">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                                </t>
                                                <t t-else="">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                            </th>
                        </t>
                    </tr>
                    <tr>
                        <th class="date_col">
                            Order Reference
                        </th>
                        <th class="date_col">
                            Expected Date
                        </th>
                        <th class="date_col">
                            Vendor
                        </th>
                        <th class="date_col">
                            Receipt Date
                        </th>
                        <th class="date_col">
                            Purchase Representative
                        </th>
                        <th class="date_col">
                            Source Document
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Advance Payment
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining Amount
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining to be Received
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining to be Billed
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Total
                        </th>
                        <th class="date_col">
                            Billing Status
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Left to be Paid
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="o.return_today()" t-options="{'widget': 'date'}" />
                        </th>
                        <t t-set='date_sets' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-foreach="date_sets" t-as="dt">
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="dt" t-options="{'widget': 'date'}" />
                            </th>
                        </t>
                    </tr>
                </thead>

                <tbody>
                    <t t-set='purchase_orders' t-value="request.env['purchase.order'].browse(o.find_general_data().get('purchase_order'))" />
                    <t t-foreach="purchase_orders" t-as="line">
                        <tr class="lines">
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.expected_date" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.partner_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.date_planned" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.user_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.origin" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.advance_payment" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.remaining_amount" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.qty_received_total" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.qty_billed_total" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.amount_total"/>
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-esc="dict(line.fields_get(allfields=['invoice_status'])['invoice_status']['selection'])[line.invoice_status]" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <t t-if="line.remaining_amount == 0">
                                    <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="line.qty_received_total"  />
                                        </a>
                                    </t>
                                </t>
                                <t t-else="">
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.remaining_amount" />
                                    </a>
                                </t>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <t t-if="line.expected_date">
                                    <t t-set='all_dt' t-value="o.set_dates_in_reports(o.find_general_data())" />
                                    <t t-set="dt_start" t-value="line.expected_date " />
                                    <t t-if="dt_start &lt; all_dt[0]">
                                        <t t-if="line.expected_date &lt;= dt_start">
                                            <t t-if="line.expected_date  &lt;=  o.return_today()">
                                                <t t-if="line.remaining_amount == 0">
                                                    <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="line.qty_received_total"  />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="line.remaining_amount" />
                                                    </a>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var" />
                                                </a>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="dummy_var" />
                                        </a>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-set="dummy_var" t-value="0.00"/>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="dummy_var" />
                                    </a>
                                </t>
                            </td>
                            <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>

                            <t t-set='first' t-value="0"/>
                            <t t-foreach="len(dt_op)" t-as="dt">
                                <t t-set='first' t-value="first+1"/>
                                <td class="act_as_cell amount date_col_header">
                                    <t t-if="line.expected_date">
                                        <t t-set="dt_tt" t-value="line.expected_date " />
                                        <span>
                                            <t t-if="first == 1">
                                                <t t-if="dt_tt &lt;= dt_op[dt]">
                                                    <t t-if="dt_tt &gt; o.return_today()">
                                                        <t t-if="line.remaining_amount == 0">
                                                            <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                                <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="line.qty_received_total" />
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="dummy_var" t-value="0.00"/>
                                                                <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="dummy_var" />
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="line.remaining_amount" />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var" />
                                                    </a>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="dt_tt &lt;= dt_op[dt]">
                                                    <t t-if="dt_tt &gt; dt_op[dt-1]">
                                                        <t t-if="line.remaining_amount == 0">
                                                            <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                              <t t-raw="line.qty_received_total" />
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                               <t t-raw="line.remaining_amount"  />
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var" />
                                                    </a>
                                                </t>
                                            </t>
                                        </span>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="dummy_var" />
                                        </a>
                                    </t>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template id="balance_quotations_lines">
        <div class="tableFixHead">
            <table id="balance_quotations_id" class="balance_quotations_lines hide_table">
                <t t-set="quote_total_amount" t-value="0" />
                <t t-set="remaining_funds_to_be_received" t-value="0" />
                <t t-set="quote_start_date_pending_amount" t-value="0" />
                <t t-set='quoteamount' t-value="request.env['sale.order'].browse(o.find_general_data().get('quotations'))" />

                <t t-foreach="quoteamount" t-as="so_line">
                    <t t-set="quote_total_amount" t-value="so_line.amount_total +  quote_total_amount" />
                    <t t-set="remaining_funds_to_be_received" t-value="so_line.remaining_funds_to_be_received +  remaining_funds_to_be_received" />
                    <t t-if="so_line.new_expected_date">
                        <t t-if="so_line.new_expected_date &lt;= o.return_today()">
                            <t t-set="quote_start_date_pending_amount" t-value="so_line.amount_total +  quote_start_date_pending_amount" />
                        </t>
                    </t>
                </t>
                <thead class="sort_date">
                    <tr>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="quote_total_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="quote_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                        <t t-set="first" t-value="0" />
                        <t t-foreach="len(dt_op)" t-as="dt">
                            <t t-set="date_wise_amount" t-value="0" />
                            <t t-set="first" t-value="first+1" />
                            <t t-foreach="quoteamount" t-as="so">
                                <t t-if="so.new_expected_date">
                                    <t t-if="first == 1">
                                        <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                            <t t-if="so.new_expected_date &gt; o.return_today()">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_total" />
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                            <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                                <t t-set="date_wise_amount" t-value="date_wise_amount + so.amount_total" />
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                            </th>
                        </t>
                    </tr>
                    <tr>
                        <th class="date_col">
                            Order Reference
                        </th>
                        <th class="date_col">
                            Order Date
                        </th>
                        <th class="date_col">
                            Delivery Date
                        </th>
                        <th class="date_col">
                            Expected Date
                        </th>
                        <th class="date_col">
                            Customer
                        </th>
                        <th class="date_col">
                            Customer Reference
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Total
                        </th>
                        <th class="date_col">
                            Invoice Status
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="o.return_today()" t-options="{'widget': 'date'}" />
                        </th>
                        <t t-set='date_sets_so' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-foreach="date_sets_so" t-as="dt_so">
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="dt_so" t-options="{'widget': 'date'}" />
                            </th>
                        </t>
                    </tr>
                </thead>

                <tbody>
                    <t t-set='sale_orders' t-value="request.env['sale.order'].browse(o.find_general_data().get('quotations'))" />
                    <t t-foreach="sale_orders" t-as="so">
                        <tr class="lines">
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.date_order" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.commitment_date" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.new_expected_date" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.partner_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="so.client_order_ref" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="so.amount_total"/>
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action">
                                        <t t-esc="dict(so.fields_get(allfields=['invoice_status'])['invoice_status']['selection'])[so.invoice_status]" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <t t-if="so.new_expected_date">
                                    <t t-if="so.new_expected_date &lt;= o.return_today()">
                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="so.amount_total" />
                                        </a>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="dummy_var" />
                                        </a>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-set="dummy_var" t-value="0.00"/>
                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="dummy_var" />
                                    </a>
                                </t>
                            </td>
                            <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                            <t t-set="first" t-value="0"/>
                            <t t-foreach="len(dt_op)" t-as="dt">
                                <t t-set="first" t-value="first+1"/>
                                <td class="act_as_cell amount date_col_header">
                                    <span>
                                        <t t-if="so.new_expected_date">
                                            <t t-if="first == 1">
                                                <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.new_expected_date &gt; o.return_today()">
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="so.amount_total" />
                                                        </a>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var" />
                                                    </a>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="so.new_expected_date &lt;= dt_op[dt]">
                                                    <t t-if="so.new_expected_date &gt; dt_op[dt-1]">
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="so.amount_total" />
                                                        </a>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var" />
                                                    </a>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-else="">
                                            <t t-set="dummy_var" t-value="0.00"/>
                                            <a t-att-data-active-id="so.id" t-att-data-res-model="'sale.order'" class="o_account_financial_reports_web_action_monetary">
                                                <t t-raw="dummy_var" />
                                            </a>
                                        </t>
                                    </span>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template id="balance_rfqs_lines">
        <div class="tableFixHead">
            <table id="balance_rfqs_id" class="balance_rfqs_lines hide_table">
                <t t-set="rfq_remaining_to_be_received" t-value="0" />
                <t t-set="rfq_remaining_to_be_billed" t-value="0" />
                <t t-set="rfq_total" t-value="0" />
                <t t-set="rfq_left_to_be_paid" t-value="0" />
                <t t-set="rfq_start_date_pending_amount" t-value="0" />
                <t t-set='rfqamount' t-value="request.env['purchase.order'].browse(o.find_general_data().get('rfqs'))" />
                <t t-foreach="rfqamount" t-as="line">
                    <t t-set="rfq_remaining_to_be_received" t-value="line.qty_received_total +  rfq_remaining_to_be_received" />
                    <t t-set="rfq_remaining_to_be_billed" t-value="line.qty_billed_total +  rfq_remaining_to_be_billed" />
                    <t t-set="rfq_total" t-value="line.amount_total +  rfq_total" />
                    <t t-if="line.remaining_amount == 0">
                        <t t-if="line.qty_received_total &gt; line.remaining_amount">
                            <t t-set="rfq_left_to_be_paid" t-value="line.qty_received_total +  rfq_left_to_be_paid" />
                        </t>
                    </t>
                    <t t-else="">
                        <t t-set="rfq_left_to_be_paid" t-value="line.remaining_amount +  rfq_left_to_be_paid" />
                    </t>
                </t>
                <t t-foreach="rfqamount" t-as="line">
                    <t t-if="line.expected_date">
                        <t t-set='all_dt' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set="dt_start" t-value="line.expected_date " />
                        <t t-if="dt_start &lt; all_dt[0]">
                            <t t-if="line.expected_date &lt;= dt_start">
                                <t t-if="line.expected_date  &lt;=  o.return_today()">
                                    <t t-if="line.remaining_amount == 0">
                                        <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                            <t t-set="rfq_start_date_pending_amount" t-value="rfq_start_date_pending_amount + line.qty_received_total"/>
                                        </t>
    
                                    </t>
                                    <t t-else="">
                                        <t t-set="rfq_start_date_pending_amount" t-value="rfq_start_date_pending_amount + line.remaining_amount"/>
                                    </t>
                                </t>
                            </t>
                            <t t-else="">
                                <t t-set="rfq_start_date_pending_amount" t-value="0"/>
                            </t>
                        </t>
                    </t>
                </t>

                <thead class="sort_date">
                    <tr>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="rfq_remaining_to_be_received" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="rfq_remaining_to_be_billed" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="rfq_total" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="amount date_col"></th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="rfq_left_to_be_paid" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="rfq_start_date_pending_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                        </th>
                        <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                        <t t-set='first' t-value="0"/>
                        <t t-foreach="len(dt_op)" t-as="dt">
                            <t t-set="date_wise_amount" t-value="0" />
                            <t t-set='first' t-value="first+1"/>
                            <t t-foreach="rfqamount" t-as="line">
                                <t t-if="line.expected_date">
                                    <t t-set="dt_tt" t-value="line.expected_date " />
                                    <t t-if="first == 1">
                                        <t t-if="dt_tt &lt;= dt_op[dt]">
                                            <t t-if="dt_tt &gt; o.return_today()">
                                                <t t-if="line.remaining_amount == 0">
                                                    <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                        <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-if="first != 1">
                                        <t t-if="dt_tt &lt;= dt_op[dt]">
                                            <t t-if="dt_tt &gt; dt_op[dt-1]">
                                                <t t-if="line.remaining_amount == 0">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.qty_received_total" />
                                                </t>
                                                <t t-else="">
                                                    <t t-set="date_wise_amount" t-value="date_wise_amount + line.remaining_amount" />
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="date_wise_amount" t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}" />
                            </th>
                        </t>
                    </tr>
                    <tr>
                        <th class="date_col">
                            Order Reference
                        </th>
                        <th class="date_col">
                            Expected Date
                        </th>
                        <th class="date_col">
                            Vendor
                        </th>
                        <th class="date_col">
                            Receipt Date
                        </th>
                        <th class="date_col">
                            Purchase Representative
                        </th>
                        <th class="date_col">
                            Source Document
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Advance Payment
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining Amount
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining to be Received
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Remaining to be Billed
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Total
                        </th>
                        <th class="date_col">
                            Billing Status
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            Left to be Paid
                        </th>
                        <th class="act_as_cell amount date_col_header">
                            <t t-raw="o.return_today()" t-options="{'widget': 'date'}" />
                        </th>
                        <t t-set='date_sets' t-value="o.set_dates_in_reports(o.find_general_data())" />
                        <t t-foreach="date_sets" t-as="dt">
                            <th class="act_as_cell amount date_col_header">
                                <t t-raw="dt" t-options="{'widget': 'date'}" />
                            </th>
                        </t>
                    </tr>
                </thead>

                <tbody>
                    <t t-set='purchase_orders' t-value="request.env['purchase.order'].browse(o.find_general_data().get('rfqs'))" />
                    <t t-foreach="purchase_orders" t-as="line">
                        <tr class="lines">
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.expected_date" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.partner_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.date_planned" t-options="{'widget': 'date'}" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.user_id.name" />
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-raw="line.origin" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.advance_payment" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.remaining_amount" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.qty_received_total" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.qty_billed_total" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.amount_total"/>
                                    </a>
                                </span>
                            </td>
                            <td class="right date_col">
                                <span>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action">
                                        <t t-esc="dict(line.fields_get(allfields=['invoice_status'])['invoice_status']['selection'])[line.invoice_status]" />
                                    </a>
                                </span>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <t t-if="line.remaining_amount == 0">
                                    <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="line.qty_received_total" />
                                        </a>
                                    </t>
                                </t>
                                <t t-else="">
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="line.remaining_amount" />
                                    </a>
                                </t>
                            </td>
                            <td class="act_as_cell amount date_col_header">
                                <t t-if="line.expected_date">
                                    <t t-set='all_dt' t-value="o.set_dates_in_reports(o.find_general_data())" />
                                    <t t-set="dt_start" t-value="line.expected_date " />
                                    <t t-if="dt_start &lt; all_dt[0]">
                                        <t t-if="line.expected_date &lt;= dt_start">
                                            <t t-if="line.expected_date  &lt;=  o.return_today()">
                                                <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="line.qty_received_total" />
                                                    </a>
                                                </t>
                                                <t t-else="">
                                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="line.remaining_amount" />
                                                    </a>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-set="dummy_var" t-value="0.00"/>
                                                <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                    <t t-raw="dummy_var" />
                                                </a>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="dummy_var" />
                                        </a>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-set="dummy_var" t-value="0.00"/>
                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                        <t t-raw="dummy_var" />
                                    </a>
                                </t>
                            </td>
                            <t t-set='dt_op' t-value="o.set_dates_in_reports(o.find_general_data())" />
                            <t t-set='closest_date' t-value="o.closest_date(dt_op)"/>
                            <t t-set='first' t-value="0"/>
                            <t t-foreach="len(dt_op)" t-as="dt">
                                <t t-set='first' t-value="first+1"/>
                                <td class="act_as_cell amount date_col_header">
                                    <t t-if="line.expected_date">
                                        <t t-set="dt_tt" t-value="line.expected_date " />
                                        <span>
                                            <t t-if="first == 1">
                                                <t t-if="dt_tt &lt;= dt_op[dt]">
                                                    <t t-if="dt_tt &gt; o.return_today()">
                                                        <t t-if="line.remaining_amount == 0">
                                                            <t t-if="line.qty_received_total &gt; line.remaining_amount">
                                                                <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                                    <t t-raw="line.qty_received_total" />
                                                                </a>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                                <t t-raw="line.remaining_amount"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var" />
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var" />
                                                    </a>
                                                </t>
                                            </t>
                                            <t t-if="first != 1">
                                                <t t-if="dt_tt &lt;= dt_op[dt]">
                                                    <t t-if="dt_tt &gt; dt_op[dt-1]">
                                                        <t t-if="line.remaining_amount == 0">
                                                            <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                              <t t-raw="line.qty_received_total" />
                                                            </a>
                                                        </t>
                                                        <t t-else="">
                                                            <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                               <t t-raw="line.remaining_amount"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="dummy_var" t-value="0.00"/>
                                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                            <t t-raw="dummy_var"/>
                                                        </a>
                                                    </t>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="dummy_var" t-value="0.00"/>
                                                    <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                                        <t t-raw="dummy_var" />
                                                    </a>
                                                </t>
                                            </t>
                                        </span>
                                    </t>
                                    <t t-else="">
                                        <t t-set="dummy_var" t-value="0.00"/>
                                        <a t-att-data-active-id="line.id" t-att-data-res-model="'purchase.order'" class="o_account_financial_reports_web_action_monetary">
                                            <t t-raw="dummy_var" />
                                        </a>
                                    </t>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>
</odoo>
